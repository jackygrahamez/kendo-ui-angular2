{"version":3,"sources":["webpack:///webpack/bootstrap 13e767750b2d13e6c0a1?db68********","webpack:///./src/common/defined.js?16fa*******","webpack:///./src/text-metrics/measure-text.js?bb67**","webpack:///./src/text-metrics/text-metrics.js?405d**","webpack:///./src/text-metrics/lru-cache.js?c8c5**","webpack:///./src/text-metrics.js?267d*"],"names":[],"mappings":"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","file":"src/text-metrics.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 13e767750b2d13e6c0a1\n **/","const UNDEFINED = \"undefined\";\n\nexport default function defined(value) {\n    return typeof value !== UNDEFINED;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/common/defined.js\n **/","import TextMetrics from './text-metrics';\n\nexport default function measureText(text, style, measureBox) {\n    return TextMetrics.current.measure(text, style, measureBox);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/text-metrics/measure-text.js\n **/","import LRUCache from './lru-cache';\nimport defined from '../common/defined';\n\nfunction zeroSize() {\n    return { width: 0, height: 0, baseline: 0 };\n}\n\nconst DEFAULT_OPTIONS = {\n    baselineMarkerSize: 1\n};\n\nfunction objectKey(object) {\n    const parts = [];\n    for (let key in object) {\n        parts.push(key + object[key]);\n    }\n\n    return parts.sort().join(\"\");\n}\n\n// Computes FNV-1 hash\n// See http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function\nfunction hashKey(str) {\n    // 32-bit FNV-1 offset basis\n    // See http://isthe.com/chongo/tech/comp/fnv/#FNV-param\n    let hash = 0x811C9DC5;\n\n    for (let i = 0; i < str.length; ++i) {\n        hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n        hash ^= str.charCodeAt(i);\n    }\n\n    return hash >>> 0;\n}\n\nlet defaultMeasureBox;\n\nif (typeof document !== \"undefined\") {\n    defaultMeasureBox = document.createElement(\"div\");\n    defaultMeasureBox.style.cssText = `position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;\n              padding: 0 !important; margin: 0 !important; border: 0 !important;\n              line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;`;\n}\n\nclass TextMetrics {\n    constructor(options) {\n        this._cache = new LRUCache(1000);\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    }\n\n    measure(text, style, box) {\n        if (!text) {\n            return zeroSize();\n        }\n\n        const styleKey = objectKey(style);\n        const cacheKey = hashKey(text + styleKey);\n        const cachedResult = this._cache.get(cacheKey);\n\n        if (cachedResult) {\n            return cachedResult;\n        }\n\n        const size = zeroSize();\n        const measureBox = box || defaultMeasureBox;\n        const baselineMarker = this._baselineMarker().cloneNode(false);\n\n        for (let key in style) {\n            let value = style[key];\n            if (defined(value)) {\n                measureBox.style[key] = value;\n            }\n        }\n\n        measureBox.textContent = text;\n        measureBox.appendChild(baselineMarker);\n        document.body.appendChild(measureBox);\n\n        if (String(text).length) {\n            size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n            size.height = measureBox.offsetHeight;\n            size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n        }\n\n        if (size.width > 0 && size.height > 0) {\n            this._cache.put(cacheKey, size);\n        }\n\n        measureBox.parentNode.removeChild(measureBox);\n\n        return size;\n    }\n\n    _baselineMarker() {\n        const marker = document.createElement(\"div\");\n        marker.style.cssText = \"display: inline-block; vertical-align: baseline;width: \" +\n            this.options.baselineMarkerSize + \"px; height: \" + this.options.baselineMarkerSize + \"px;overflow: hidden;\";\n\n        return marker;\n    }\n}\n\nTextMetrics.current = new TextMetrics();\n\nexport default TextMetrics;\n\n\n/** WEBPACK FOOTER **\n ** ./src/text-metrics/text-metrics.js\n **/","class LRUCache {\n    constructor(size) {\n        this._size = size;\n        this._length = 0;\n        this._map = {};\n    }\n\n    put(key, value) {\n        const map = this._map;\n        const entry = { key: key, value: value };\n\n        map[key] = entry;\n\n        if (!this._head) {\n            this._head = this._tail = entry;\n        } else {\n            this._tail.newer = entry;\n            entry.older = this._tail;\n            this._tail = entry;\n        }\n\n        if (this._length >= this._size) {\n            map[this._head.key] = null;\n            this._head = this._head.newer;\n            this._head.older = null;\n        } else {\n            this._length++;\n        }\n    }\n\n    get(key) {\n        const entry = this._map[key];\n\n        if (entry) {\n            if (entry === this._head && entry !== this._tail) {\n                this._head = entry.newer;\n                this._head.older = null;\n            }\n\n            if (entry !== this._tail) {\n                if (entry.older) {\n                    entry.older.newer = entry.newer;\n                    entry.newer.older = entry.older;\n                }\n\n                entry.older = this._tail;\n                entry.newer = null;\n\n                this._tail.newer = entry;\n                this._tail = entry;\n            }\n\n            return entry.value;\n        }\n    }\n}\n\nexport default LRUCache;\n\n\n/** WEBPACK FOOTER **\n ** ./src/text-metrics/lru-cache.js\n **/","export { default as LRUCache } from './text-metrics/lru-cache';\nexport { default as TextMetrics } from './text-metrics/text-metrics';\nexport { default as measureText } from './text-metrics/measure-text';\n\n\n/** WEBPACK FOOTER **\n ** ./src/text-metrics.js\n **/"],"sourceRoot":""}